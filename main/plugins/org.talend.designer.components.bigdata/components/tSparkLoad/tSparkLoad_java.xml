<?xml version="1.0" encoding="UTF-8"?>
<COMPONENT>
	<HEADER PLATEFORM="ALL" SERIAL="" VERSION="0.101" STATUS="ALPHA"
		COMPATIBILITY="ALL" AUTHOR="Altic" RELEASE_DATE="20140325A" STARTABLE="true"
		PARTITIONING="NONE">
		<SIGNATURE></SIGNATURE>
	</HEADER>

	<FAMILIES>
		<FAMILY>Big Data/Spark</FAMILY>
	</FAMILIES>

	<DOCUMENTATION>
		<URL />
	</DOCUMENTATION>

	<CONNECTORS>
		<CONNECTOR CTYPE="FLOW" MAX_INPUT="0" MAX_OUTPUT="0" COLOR="086438" />
		<CONNECTOR NAME="SPARKCOMBINE" CTYPE="FLOW" MAX_INPUT="0"
			MAX_OUTPUT="1" COLOR="086438" BASE_SCHEMA="FLOW" />
		<CONNECTOR CTYPE="SUBJOB_OK" MAX_INPUT="1" MAX_OUTPUT="1" />
		<CONNECTOR CTYPE="SUBJOB_ERROR" MAX_INPUT="1" />
	</CONNECTORS>

	<PARAMETERS>
		<PARAMETER NAME="SPARK_CONNECTION" FIELD="COMPONENT_LIST"
			FILTER="tSparkConnection" REQUIRED="true" NUM_ROW="5" />
		<PARAMETER NAME="MAIN_SCHEMA" FIELD="SCHEMA_TYPE" REQUIRED="true"
			NUM_ROW="10" />
		<PARAMETER NAME="COMBINE_SCHEMA" FIELD="SCHEMA_TYPE"
			REQUIRED="true" NUM_ROW="10" CONTEXT="SPARKCOMBINE" />


		<PARAMETER NAME="STORAGE_SOURCE" FIELD="CLOSED_LIST"
			REQUIRED="true" NUM_ROW="30" GROUP="STORAGE">
			<ITEMS DEFAULT="HDFS">
				<ITEM NAME="LOCAL" VALUE="LOCAL"
					SHOW_IF="#LINK@NODE.SPARK_CONNECTION.SPARK_MODE=='LOCAL'" />
				<ITEM NAME="HDFS" VALUE="HDFS"
					SHOW_IF="#LINK@NODE.SPARK_CONNECTION.SPARK_MODE!='LOCAL'" />
				<ITEM NAME="TWITTER" VALUE="TWITTER"
					SHOW_IF="#LINK@NODE.SPARK_CONNECTION.STREAMING=='true'" />
				<ITEM NAME="KAFKA" VALUE="KAFKA"
					SHOW_IF="#LINK@NODE.SPARK_CONNECTION.STREAMING=='true'" />
				<ITEM NAME="HBASE" VALUE="HBASE" />
				<ITEM NAME="CUSTOM" VALUE="CUSTOM" />
			</ITEMS>
		</PARAMETER>
		<PARAMETER NAME="NOTE_HBASE_STREAMING" FIELD="LABEL"
			REQUIRED="true" NUM_ROW="31"
			SHOW_IF="(STORAGE_SOURCE=='HBASE') AND (#LINK@NODE.SPARK_CONNECTION.STREAMING=='true')"
			GROUP="STORAGE">
			<DEFAULT><![CDATA[The HBase storage mode is supported in streaming mode only in a lookup flow.]]>
			</DEFAULT>
		</PARAMETER>

		<PARAMETER NAME="FS_DEFAULT_NAME" FIELD="TEXT" REQUIRED="true"
			NUM_ROW="35" GROUP="STORAGE" SHOW_IF="STORAGE_SOURCE=='HDFS'">
			<DEFAULT>"hdfs://localhost:8020"</DEFAULT>
		</PARAMETER>

		<!-- Input File -->
		<PARAMETER NAME="INPUT_FILE" FIELD="TEXT" REQUIRED="true"
			NUM_ROW="60" SHOW_IF="((STORAGE_SOURCE=='LOCAL') OR (STORAGE_SOURCE=='HDFS'))">
			<DEFAULT>"/tmp/myFile.txt"</DEFAULT>
		</PARAMETER>
		<!-- Type -->
		<PARAMETER NAME="TYPE" FIELD="CLOSED_LIST" REQUIRED="true"
			NUM_ROW="70" SHOW_IF="((STORAGE_SOURCE=='LOCAL') OR (STORAGE_SOURCE=='HDFS'))">
			<ITEMS DEFAULT="TEXTFILE">
				<ITEM NAME="TEXTFILE" VALUE="TEXTFILE" />
			</ITEMS>
		</PARAMETER>
		<PARAMETER NAME="ROW_SEPARATOR" FIELD="TEXT" REQUIRED="true"
			NUM_ROW="80" SHOW_IF="((STORAGE_SOURCE=='LOCAL') OR (STORAGE_SOURCE=='HDFS'))">
			<DEFAULT>";"</DEFAULT>
		</PARAMETER>

		<!-- Twitter -->
		<PARAMETER NAME="CONSUMERKEY" FIELD="TEXT" REQUIRED="true"
			NUM_ROW="40" SHOW_IF="STORAGE_SOURCE=='TWITTER'" GROUP="TWITTER_CONFIGURATION">
			<DEFAULT>""</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="CONSUMERSECRET" FIELD="PASSWORD" REQUIRED="true"
			NUM_ROW="40" SHOW_IF="STORAGE_SOURCE=='TWITTER'" GROUP="TWITTER_CONFIGURATION">
			<DEFAULT>""</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="ACCESSTOKEN" FIELD="TEXT" REQUIRED="true"
			NUM_ROW="45" SHOW_IF="STORAGE_SOURCE=='TWITTER'" GROUP="TWITTER_CONFIGURATION">
			<DEFAULT>""</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="SECRETTOKEN" FIELD="PASSWORD" REQUIRED="true"
			NUM_ROW="45" SHOW_IF="STORAGE_SOURCE=='TWITTER'" GROUP="TWITTER_CONFIGURATION">
			<DEFAULT>""</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="FILTER" FIELD="TEXT" REQUIRED="true"
			NUM_ROW="50" SHOW_IF="STORAGE_SOURCE=='TWITTER'" GROUP="TWITTER_CONFIGURATION">
			<DEFAULT>"talend,spark,bigdata"</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="MAPPING" FIELD="TABLE" REQUIRED="true"
			NUM_ROW="55" NB_LINES="5" SHOW_IF="STORAGE_SOURCE=='TWITTER'" GROUP="TWITTER_CONFIGURATION">
			<ITEMS BASED_ON_SCHEMA="true">
				<ITEM NAME="TWITTER_PROPERTY" FIELD="CLOSED_LIST">
					<ITEMS DEFAULT="USERNAME">
						<ITEM NAME="USERNAME" VALUE="USERNAME" />
						<ITEM NAME="ID" VALUE="ID" />
						<ITEM NAME="TEXT" VALUE="TEXT" />
						<ITEM NAME="SOURCE" VALUE="SOURCE" />
						<ITEM NAME="ACCESSLEVEL" VALUE="ACCESSLEVEL" />
						<ITEM NAME="DATE" VALUE="DATE" />
						<ITEM NAME="GEOLOCATION_LATITUDE" VALUE="GEOLOCATION_LATITUDE" />
						<ITEM NAME="GEOLOCATION_LONGITUDE" VALUE="GEOLOCATION_LONGITUDE" />
						<ITEM NAME="HASHTAG" VALUE="HASHTAG" />
					</ITEMS>
				</ITEM>
			</ITEMS>
		</PARAMETER>

		<!-- Kafka -->

		<PARAMETER NAME="ZOOKEEPER_HOST_KAFKA" FIELD="TEXT"
			REQUIRED="true" NUM_ROW="40" SHOW_IF="STORAGE_SOURCE=='KAFKA'" GROUP="KAFKA_CONFIGURATION">
			<DEFAULT>"localhost"</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="ZOOKEEPER_PORT_KAFKA" FIELD="TEXT"
			REQUIRED="true" NUM_ROW="40" SHOW_IF="STORAGE_SOURCE=='KAFKA'" GROUP="KAFKA_CONFIGURATION">
			<DEFAULT>"2181"</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="KAFKA_TOPIC" FIELD="TEXT" REQUIRED="true"
			NUM_ROW="45" SHOW_IF="STORAGE_SOURCE=='KAFKA'" GROUP="KAFKA_CONFIGURATION">
			<DEFAULT>"topic"</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="NUM_THREAD" FIELD="TEXT" REQUIRED="true"
			NUM_ROW="45" SHOW_IF="STORAGE_SOURCE=='KAFKA'" GROUP="KAFKA_CONFIGURATION">
			<DEFAULT>1</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="CONSUMER_GROUP_NAME" FIELD="TEXT" REQUIRED="true"
			NUM_ROW="50" SHOW_IF="STORAGE_SOURCE=='KAFKA'" GROUP="KAFKA_CONFIGURATION">
			<DEFAULT>"Talend"</DEFAULT>
		</PARAMETER>

		<!-- HBase -->

		<PARAMETER NAME="ZOOKEEPER_HOST_HBASE" FIELD="TEXT"
			REQUIRED="true" NUM_ROW="40" SHOW_IF="STORAGE_SOURCE=='HBASE'" GROUP="HBASE_CONFIGURATION">
			<DEFAULT>"localhost"</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="ZOOKEEPER_PORT_HBASE" FIELD="TEXT"
			REQUIRED="true" NUM_ROW="40" SHOW_IF="STORAGE_SOURCE=='HBASE'" GROUP="HBASE_CONFIGURATION">
			<DEFAULT>"2181"</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="HBASE_TABLE" FIELD="TEXT" REQUIRED="true"
			NUM_ROW="45" SHOW_IF="STORAGE_SOURCE=='HBASE'" GROUP="HBASE_CONFIGURATION">
			<DEFAULT>"table"</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="MAPPING_HBASE" FIELD="TABLE" REQUIRED="true"
			NUM_ROW="50" NB_LINES="5" SHOW_IF="STORAGE_SOURCE=='HBASE'" GROUP="HBASE_CONFIGURATION">
			<ITEMS BASED_ON_SCHEMA="true">
				<ITEM NAME="HBASE_COLUMN" />
				<ITEM NAME="FAMILY_COLUMN" />
			</ITEMS>
		</PARAMETER>
	</PARAMETERS>
	<ADVANCED_PARAMETERS>
		<PARAMETER NAME="HBASE_PARAMETERS" FIELD="TABLE" NUM_ROW="1"
			SHOW_IF="STORAGE_SOURCE=='HBASE'">
			<ITEMS>
				<ITEM NAME="PROPERTY" FIELD="TEXT" />
				<ITEM NAME="VALUE" FIELD="TEXT" />
				<ITEM NAME="BUILDIN" SHOW_IF="false" VALUE="TRUE" />
			</ITEMS>
		</PARAMETER>
	</ADVANCED_PARAMETERS>

	<CODEGENERATION>
		<IMPORTS>
			<!-- Spark streaming -->
			<IMPORT NAME="talend-spark-streaming-external.jar" MODULE="talend-spark-streaming-external.jar"
				REQUIRED_IF="((STORAGE_SOURCE=='TWITTER') OR (STORAGE_SOURCE=='KAFKA'))"
				MRREQUIRED="true" />

			<!-- Twitter -->
			<IMPORT NAME="twitter4j-stream-3.0.3.jar" MODULE="twitter4j-stream-3.0.3.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='TWITTER')" />
			<IMPORT NAME="twitter4j-core-3.0.3.jar" MODULE="twitter4j-core-3.0.3.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='TWITTER')" />

			<!-- Kafka -->
			<IMPORT NAME="kafka_2.10-0.8.1.1.jar" MODULE="kafka_2.10-0.8.1.1.jar"
				UrlPath="platform:/plugin/org.talend.libraries.apache.kafka/lib/kafka_2.10-0.8.1.1.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='KAFKA')" MRREQUIRED="true" />
			<IMPORT NAME="zkclient-0.3" MODULE="zkclient-0.3.jar"
				UrlPath="platform:/plugin/org.talend.libraries.apache.kafka/lib/zkclient-0.3.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='KAFKA')" MRREQUIRED="true" />
			<IMPORT NAME="metrics-core-2.2.0" MODULE="metrics-core-2.2.0.jar"
				UrlPath="platform:/plugin/org.talend.libraries.apache.cassandra/lib/metrics-core-2.2.0.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='KAFKA')" MRREQUIRED="true" />
			<!-- Streaming end -->


			<!-- HBase -->
			<IMPORT NAME="hbase-common-0.98.7-hadoop2.jar" MODULE="hbase-common-0.98.7-hadoop2.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='HBASE')" MRREQUIRED="true" />
			<IMPORT NAME="hbase-client-0.98.7-hadoop2.jar" MODULE="hbase-client-0.98.7-hadoop2.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='HBASE')" MRREQUIRED="true" />
			<IMPORT NAME="hbase-server-0.98.7-hadoop2.jar" MODULE="hbase-server-0.98.7-hadoop2.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='HBASE')" MRREQUIRED="true" />
			<IMPORT NAME="hbase-protocol-0.98.7-hadoop2.jar" MODULE="hbase-protocol-0.98.7-hadoop2.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='HBASE')" MRREQUIRED="true" />
			<IMPORT NAME="zookeeper-3.4.5-cdh5.1.2.jar" MODULE="zookeeper-3.4.5-cdh5.1.2.jar"
				UrlPath="platform:/plugin/org.talend.libraries.zookeeper/lib/zookeeper-3.4.5-cdh5.1.2.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='HBASE')" MRREQUIRED="true" />
			<IMPORT NAME="htrace-core-2.04.jar" MODULE="htrace-core-2.04.jar"
				UrlPath="platform:/plugin/org.talend.libraries.hadoop.hdp.2.1/lib/htrace-core-2.04.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='HBASE')" MRREQUIRED="true" />
			<IMPORT NAME="jackson-mapper-asl-1.8.8.jar" MODULE="jackson-mapper-asl-1.8.8.jar"
				UrlPath="platform:/plugin/org.talend.libraries.jackson/lib/jackson-mapper-asl-1.8.8.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='HBASE')" MRREQUIRED="true" />
			<IMPORT NAME="jackson-core-asl-1.8.8.jar" MODULE="jackson-core-asl-1.8.8.jar"
				UrlPath="platform:/plugin/org.talend.libraries.jackson/lib/jackson-core-asl-1.8.8.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='HBASE')" MRREQUIRED="true" />
			<IMPORT NAME="protobuf-java-2.5.0.jar" MODULE="protobuf-java-2.5.0.jar"
				UrlPath="platform:/plugin/org.talend.libraries.hadoop.hdp.2.0/lib/protobuf-java-2.5.0.jar"
				REQUIRED_IF="(STORAGE_SOURCE=='HBASE')" MRREQUIRED="true" />

		</IMPORTS>
	</CODEGENERATION>
	<RETURNS>
	</RETURNS>
</COMPONENT>
